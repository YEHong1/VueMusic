webpackJsonp([4],{"3Y4w":function(t,i){},MKwE:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("gyMJ"),n=s("GQaK"),r={name:"Singer",data:function(){return{singers:[],scrollY:0,liTops:[]}},computed:{shortCutList:function(){return this.singers.map(function(t){return t.title})},currentIndex:function(){for(var t=Math.abs(this.scrollY),i=this.liTops.length-1;i>=0;i--)if(t>=this.liTops[i])return i}},methods:{_initTops:function(){var t=[],i=0;t.push(i);for(var s=this.$refs.typeList.children,e=0;e<s.length;e++)i+=s[e].clientHeight,t.push(i);this.liTops=t},scrollToClick:function(t){this.scrollList.scrollTo(0,-this.liTops[t],500)},goSingerDetail:function(t){this.$router.push("/singer/"+t.id),this.$store.dispatch("setSingerInfo",t)}},mounted:function(){var t=this;Object(e.e)().then(function(i){t.singers=i.data})},watch:{singers:function(t){var i=this;t.length&&this.$nextTick(function(){i.scrollList=new n.a(".wrapper",{click:!0,probeType:3}),i.scrollList.on("scroll",function(t){t.x;var s=t.y;i.scrollY=s}),i._initTops()})}}},l={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{staticClass:"wrapper"},[s("ul",{ref:"typeList",staticClass:"typeList"},t._l(t.singers,function(i,e){return s("li",{key:e},[s("h2",[t._v(t._s(i.title))]),t._v(" "),s("ul",{staticClass:"singerList"},t._l(i.items,function(i,e){return s("li",{key:e,on:{click:function(s){return t.goSingerDetail(i)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.avatarUrl,expression:"item.avatarUrl"}],attrs:{alt:""}}),t._v(" "),s("span",[t._v(t._s(i.name))])])}),0)])}),0),t._v(" "),s("div",{staticClass:"shortCutList"},[s("ul",t._l(t.shortCutList,function(i,e){return s("li",{key:e,class:{active:e===t.currentIndex},on:{click:function(i){return t.scrollToClick(e)}}},[t._v(t._s(i))])}),0)]),t._v(" "),t.shortCutList.length&&t.scrollY<0?s("div",{staticClass:"fixedTitle"},[t._v(t._s(t.shortCutList[t.currentIndex]))]):t._e()]),t._v(" "),s("transition",{attrs:{name:"slide"}},[s("router-view")],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,l,!1,function(t){s("3Y4w")},"data-v-d7ffa076",null);i.default=o.exports}});
//# sourceMappingURL=4.6e14659f779958d0f051.js.map